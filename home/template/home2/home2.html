{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
    <title>Bootstrap Example</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body class="p-0 m-0 border-0"> 
  

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark m-0">
        <a class="navbar-brand" href="{% url 'home' %}">فروشگاه انلاین</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
          <ul class="navbar-nav">
            
            
                {% if user.is_authenticated %}
               <li class="nav-item">
              <a class="nav-link" href="{% url 'signup' %}">پروفایل</a>
              <li>
              <a class="nav-link" href="{% url 'signout' %}">خروج</a>
              </li>     
              <li class="nav-item active">
                <a class="nav-link" href="{% url 'view_cart' %}">سبد خرید <span class="sr-only"></span></a>
              </li>
            {% else %}
            <a class="nav-link" href="{% url 'signup' %}">ورود/ثبت نام</a>
            {% endif %}
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">درباره ما</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'home' %}" id="navbarDropdownMenuLink" aria-haspopup="true" aria-expanded="false">
                خانه
              </a>
             
            </li>
          </ul>
        </div>  
      </nav>    
      {% for product in products %}
      
      <div class="card" style="margin: 20px 20px 20px 20px; width: 25rem;display: inline-block;">
        <!-- <img src="{{product.image.url}}" class="card-img-top" alt="{{product.name}}"> -->
        <div class="card-body">
          <h5 class="card-title">{{product.id}}</h5>
          <p class="card-text">{{product.description}}</p>
          <a href="#" class="btn btn-primary">{{product.price}}</a>
          <a class="btn btn-primary" href="{% url 'add_to_cart' product.id %}">Add to Cart</a>

          <!-- <div class="quantity">
            <input type="text" id="quantity-{{ product.id }}" value="0">
            <button class="decrease-btn" data-product-id="{{ product.id }}">-</button>
            <button class="increase-btn" data-product-id="{{ product.id }}">+</button>
        </div> -->
          
        </div>
      </div>
      {% endfor %}
      <!-- <script>
        // افزودن رویداد به دکمه‌های افزایش و کاهش
        const decreaseButtons = document.querySelectorAll('.decrease-btn');
        const increaseButtons = document.querySelectorAll('.increase-btn');
    
        decreaseButtons.forEach(button => {
            button.addEventListener('click', function() {
                decreaseQuantity(this.getAttribute('data-product-id'));
            });
        });
    
        increaseButtons.forEach(button => {
            button.addEventListener('click', function() {
                increaseQuantity(this.getAttribute('data-product-id'));
            });
        });
    
        // توابع کاهش و افزایش تعداد
        function increaseQuantity(productId) {
            var quantityField = document.getElementById('quantity-' + productId);
            var currentQuantity = parseInt(quantityField.value);
            quantityField.value = currentQuantity + 1;
        }
    
        function decreaseQuantity(productId) {
            var quantityField = document.getElementById('quantity-' + productId);
            var currentQuantity = parseInt(quantityField.value);
            if (currentQuantity > 0) {
                quantityField.value = currentQuantity - 1;
            }
        }
    </script> -->
      
  </body>
</html>